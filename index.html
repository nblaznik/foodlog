<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Food Logger</title>
  <style>
    body { font-family: sans-serif; margin: 40px; max-width: 500px; }
    h2 { margin-top: 40px; }
    input, textarea, select {
      width: 100%; padding: 8px; margin: 6px 0; box-sizing: border-box;
    }
    button { padding: 10px 15px; cursor: pointer; }
    .section { margin-bottom: 50px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
  </style>
</head>
<body>

<h1>Food Logger</h1>

<!-- FAST ENTRY -->
<div class="section">
  <h2>Fast Entry</h2>
  <textarea id="fast_desc" placeholder="Quick description (e.g. 'coffee and croissant')"></textarea>
  <button onclick="sendFast()">Submit Fast Entry</button>
</div>

<!-- DETAILED ENTRY -->
<div class="section">
  <h2>Detailed Entry</h2>

  <input id="date" placeholder="Date (YYYYMMDD)">
  <input id="time" placeholder="Time (HH:MM)">
  <input id="meal" placeholder="Meal (breakfast, lunch, snack...)">
  <textarea id="desc" placeholder="Food Description"></textarea>
  <input id="amount" placeholder="Amount (optional)">
  <input id="kcal" placeholder="kcal (optional)">
  <input id="protein" placeholder="protein g (optional)">
  <input id="carbs" placeholder="carbs g (optional)">
  <input id="fats" placeholder="fats g (optional)">

  <button onclick="sendDetailed()">Submit Detailed Entry</button>
</div>

<p id="status"></p>

<script>
const ENDPOINT = "https://script.google.com/macros/s/AKfycbygdJcT9co-L7rvAsl6vN6EW6uCvKLc6wKp0M61JZ9avrgv_bYS7bbi1JukVplb8NA/exec";

async function postData(payload) {
  const res = await fetch(ENDPOINT, {
    method: "POST",
    body: JSON.stringify(payload)
  });
  const data = await res.json();
  document.getElementById("status").innerText = data.status;
}

/* FAST ENTRY */
function sendFast() {
  const now = new Date();
  const date = now.toISOString().slice(0,10).replace(/-/g,"");
  const time = now.toTimeString().slice(0,5);

  const desc = document.getElementById("fast_desc").value;

  const payload = {
    date: date,
    time: time,
    meal: "fast-entry",
    desc: desc,
    amount: "",
    kcal: "",
    protein: "",
    carbs: "",
    fats: ""
  };

  postData(payload);
}

/* DETAILED ENTRY */
function sendDetailed() {
  const payload = {
    date: document.getElementById("date").value,
    time: document.getElementById("time").value,
    meal: document.getElementById("meal").value,
    desc: document.getElementById("desc").value,
    amount: document.getElementById("amount").value,
    kcal: document.getElementById("kcal").value,
    protein: document.getElementById("protein").value,
    carbs: document.getElementById("carbs").value,
    fats: document.getElementById("fats").value
  };

  postData(payload);
}
</script>

</body>
</html>
